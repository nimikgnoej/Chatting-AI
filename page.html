<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./style.css">
    <title>Cyber GF</title>
</head>

<body>
    <h1 id="title">Chat with AI based on Chat-GPT!</h1>
    <div class="main-chat">
    </div>
    <input class="text-input" type="text" placeholder="Chat here!" />
    <input class="text-submit" type="submit" value="send" />
    <script type="module">
        const send = document.querySelector(".text-submit")
        const text = document.querySelector(".text-input")
        const mainboard = document.querySelector(".main-chat")
        import { Configuration, OpenAIApi } from "https://cdn.skypack.dev/openai";

        const clickSend = () => {
            const myText = text.value;
            const template = `<div class="chatbox chatbox-right">${myText}</div>`
            mainboard.insertAdjacentHTML('beforeend', template);
            text.value = "";

            const configuration = new Configuration({
                organization: "org-zeImgnv8EAVoVuLnte5GxkEd",
                apiKey: "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",
            });
            const openai = new OpenAIApi(configuration);
            openai.createCompletion({
                model: "text-davinci-003",
                prompt: myText,
                max_tokens: 2048,
                temperature: 0.5,
                top_p: 1,
                frequency_penalty: 0,
                presence_penalty: 0,
            }).then((result) => {
                const answer = result.data.choices[0].text;
                console.log(result);
                const aiText = `<div class="chatbox chatbox-left">${answer}</div>`
                mainboard.insertAdjacentHTML('beforeend', aiText);
            });

        }

        send.addEventListener("click", clickSend);
    </script>
</body>

</html>